# Short Put 策略筛选配置
# 卖出看跌期权策略

market_filter:
  # 美股市场指标
  us_market:
    vix_symbol: "^VIX"
    vix_range: [15, 28]           # VIX 适宜区间
    vix_percentile_range: [0.2, 0.8]
    vix3m_symbol: "^VIX3M"
    term_structure_threshold: 0.9  # VIX/VIX3M < 0.9 为正向结构
    trend_indices:
      - symbol: "SPY"
        weight: 0.6
      - symbol: "QQQ"
        weight: 0.4
    trend_required: "bullish_or_neutral"
    pcr_symbol: "SPY"
    pcr_range: [0.8, 1.2]

  # 港股市场指标
  hk_market:
    volatility_source: "2800.HK"
    iv_calculation: "atm_weighted"
    iv_range: [18, 32]
    iv_percentile_range: [0.3, 0.8]
    trend_indices:
      - symbol: "2800.HK"
        weight: 0.5
      - symbol: "3033.HK"
        weight: 0.5
    trend_required: "bullish_or_neutral"

underlying_filter:
  min_iv_rank: 10                # 最低 IV Rank
  max_iv_hv_ratio: 2.0            # IV/HV 上限
  min_iv_hv_ratio: 0.8            # IV/HV 下限
  technical:
    min_rsi: 30                   # RSI 下限（避免接飞刀）
    max_rsi: 70                   # RSI 上限
    rsi_stabilizing_range: [30, 45]  # 企稳区间
    bb_percent_b_range: [0.1, 0.3]   # 布林带 %B 企稳区间
    max_adx: 45                   # ADX 上限（避免强趋势）
    min_sma_alignment: "neutral"  # MA 排列要求
  fundamental:
    enabled: false                # 是否启用基本面筛选
    max_pe_percentile: 0.7        # PE 历史百分位上限
    min_recommendation: "hold"    # 最低分析师评级

# contract_filter 和 output 使用 screening_config.py 默认值
